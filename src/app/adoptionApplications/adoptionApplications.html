<h2>{{ 'model.adoptionApplication.many' | translate }}</h2>

<app-loading [loading]="loading()">
  <app-table-toolbar
    [createLink]="['create']"
    [length]="dataAll().length"
    [pageSize]="pageSize"
    [pageSizeOptions]="pageSizeOptions"
    (pageChange)="onPageChange($event)"
  ></app-table-toolbar>

  <table mat-table [dataSource]="dataPagedSortedFiltered()">
    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef>#</th>
      <td mat-cell *matCellDef="let adoptionApplication">
        <app-table-actions
          [row]="adoptionApplication"
          (delete)="onDelete(adoptionApplication)"
        ></app-table-actions>
      </td>
    </ng-container>

    <!-- Adopter Id -->
    <ng-container matColumnDef="adopterId">
      <th mat-header-cell *matHeaderCellDef>
        {{ 'model.adoptionApplication.adopterId' | translate }}
      </th>
      <td mat-cell *matCellDef="let adoptionApplication">
        <button
          matIconButton
          data-cy="btn-adopterId"
          [routerLink]="['/adopters', adoptionApplication.adopterId]"
        >
          <mat-icon>arrow_forward</mat-icon>
        </button>
      </td>
    </ng-container>

    <!-- Animal Id -->
    <ng-container matColumnDef="animalId">
      <th mat-header-cell *matHeaderCellDef>
        {{ 'model.adoptionApplication.animalId' | translate }}
      </th>
      <td mat-cell *matCellDef="let adoptionApplication">
        <button
          matIconButton
          data-cy="btn-animalId"
          [routerLink]="['/animals', adoptionApplication.animalId]"
        >
          <mat-icon>arrow_forward</mat-icon>
        </button>
      </td>
    </ng-container>

    <!-- Created At -->
    <ng-container matColumnDef="createdAt">
      <th mat-header-cell *matHeaderCellDef>
        {{ 'model.adoptionApplication.createdAt' | translate }}
      </th>
      <td mat-cell *matCellDef="let adoptionApplication">
        {{ adoptionApplication.createdAt | date : dateFormat }}
      </td>
    </ng-container>

    <!-- Status -->
    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef>
        {{ 'model.adoptionApplication.status.label' | translate }}
      </th>
      <td mat-cell *matCellDef="let adoptionApplication">
        @switch (adoptionApplication.status ) { @case ('submitted') {
        <mat-icon>{{ 'model.adoptionApplication.status.submitted_icon' | translate }}</mat-icon>
        } @case ('screening') {
        <mat-icon>{{ 'model.adoptionApplication.status.screening_icon' | translate }}</mat-icon>
        } @case ('reserved') {
        <mat-icon>{{ 'model.adoptionApplication.status.reserved_icon' | translate }}</mat-icon>
        } @case ('approved') {
        <mat-icon>{{ 'model.adoptionApplication.status.approved_icon' | translate }}</mat-icon>
        } @case ('rejected') {
        <mat-icon>{{ 'model.adoptionApplication.status.rejected_icon' | translate }}</mat-icon>
        } @default{
        <mat-icon>{{ 'app.default_icon' | translate }}</mat-icon>
        } }
      </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let adoptionApplication; columns: displayedColumns"></tr>
  </table>
</app-loading>
