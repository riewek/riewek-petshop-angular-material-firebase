<app-dialog-title [form]="form" [mode]="mode()" [modelKey]="'model.enclosure'"></app-dialog-title>

<app-loading [loading]="loading()">
  <form [formGroup]="form" (ngSubmit)="save()" class="form-grid">
    <!-- Name -->
    <mat-form-field appearance="fill" floatLabel="always">
      <mat-label>{{ 'model.enclosure.name' | translate }}</mat-label>
      <input matInput formControlName="name" #name />
      <mat-hint align="end">{{ name.value.length }} / 60</mat-hint>
      @if (form.get('name')?.hasError('required')) {
      <mat-error>
        {{ 'app.dialog.required' | translate : { value: ('model.enclosure.name' | translate) } }}
      </mat-error>
      }
    </mat-form-field>

    <!-- Type -->
    <div>
      <mat-label>{{ 'model.enclosure.type.label' | translate }}</mat-label>
      <br />
      <mat-radio-group formControlName="type">
        <mat-radio-button value="indoor">
          <mat-icon>{{ 'model.enclosure.type.indoor_icon' | translate }}</mat-icon
          >{{ 'model.enclosure.type.indoor' | translate }}</mat-radio-button
        >
        <mat-radio-button value="outdoor">
          <mat-icon>{{ 'model.enclosure.type.outdoor_icon' | translate }}</mat-icon>
          {{ 'model.enclosure.type.outdoor' | translate }}</mat-radio-button
        >
      </mat-radio-group>
    </div>

    <!-- Capacity -->
    <mat-form-field appearance="fill" floatLabel="always">
      <mat-label>{{ 'model.enclosure.capacity' | translate }}</mat-label>
      <input matInput type="number" formControlName="capacity" #capacity />
      <mat-hint align="end">{{ capacity.value.length }} / 60</mat-hint>
      @if (form.get('capacity')?.hasError('required')) {
      <mat-error>
        {{
          'app.dialog.required' | translate : { value: ('model.enclosure.capacity' | translate) }
        }}</mat-error
      >
      } @if (form.get('capacity')?.hasError('min')) {
      <mat-error
        >{{
          'app.dialog.min' | translate : { value: ('model.enclosure.capacity' | translate), min: 0 }
        }}
      </mat-error>
      }
    </mat-form-field>

    <!-- Occupied -->
    <mat-form-field appearance="fill" floatLabel="always">
      <mat-label>{{ 'model.enclosure.occupied' | translate }}</mat-label>
      <input matInput type="number" formControlName="occupied" #occupied />
      <mat-hint align="end">{{ occupied.value.length }} / 60</mat-hint>
      @if (form.get('occupied')?.hasError('required')) {
      <mat-error>
        {{
          'app.dialog.required' | translate : { value: ('model.enclosure.occupied' | translate) }
        }}
      </mat-error>
      } @if (form.get('occupied')?.hasError('min')) {
      <mat-error>
        {{
          'app.dialog.min' | translate : { value: ('model.enclosure.occupied' | translate), min: 0 }
        }}
      </mat-error>
      }
    </mat-form-field>

    <!-- Notes -->
    <mat-form-field appearance="fill" floatLabel="always">
      <mat-label>{{ 'model.enclosure.notes' | translate }}</mat-label>
      <input matInput formControlName="notes" #notes />
      <mat-hint align="end">{{ notes.value.length }} / 60</mat-hint>
    </mat-form-field>
  </form>
</app-loading>

<app-form-actions
  [form]="form"
  [okLabel]="'app.dialog.ok' | translate"
  [cancelLabel]="'app.dialog.cancel' | translate"
  (ok)="save()"
  (cancel)="cancel()"
></app-form-actions>
